{"version":3,"sources":["../node_modules/tableschema/lib/profiles sync /^/.//.*/.json$","../node_modules/datapackage/node_modules/tableschema/lib/profiles sync /^/.//.*/.json$","../node_modules/datapackage/lib/profiles sync /^/.//.*/.json$","redux/modules/repoData.js","containers/DataPrep/DataPrep.js","containers/DataPrep/index.js","redux/modules/modification.js","redux/modules/ui.js","redux/modules/flows.js","components/SummaryTable.js","components/ContextTable.js","components/FormatCorrection.js","components/ForeignkeyCorrection.js","containers/DataModification/ModificationComponent.js","constants.js","redux/modules/schemaValidation.js","containers/DataModification/DataModification.js","containers/DataModification/index.js","utils/fileExporter.js","containers/DataPublish/DataPublish.js","containers/DataPublish/index.js","components/HeaderValidation.js","containers/FileUpload/FileUpload.js","containers/FileUpload/index.js","utils/fileParser.js","components/ConfirmationModal.js","components/OverviewTable.js","containers/SchemaValidation/SchemaValidation.js","containers/SchemaValidation/index.js","containers/Layout/index.js","containers/Layout/Layout.js","App.js","serviceWorker.js","redux/rootReducer.js","redux/configureStore.js","index.js"],"names":["map","./geojson.json","./table-schema.json","./topojson.json","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","./data-package.json","./data-resource.json","./fiscal-data-package.json","./registry.json","./tabular-data-package.json","./tabular-data-resource.json","FETCH_DATAPACKAGE_SUCCESS","FETCH_TABLES_SUCCESS","tablesList","name","path","initialState","DataPrep","repoData","this","props","tables","datapackage","fetchDatapackage","fetchAllTables","branch","react_default","a","createElement","React","Component","connect","state","payload","dispatch","type","Promise","all","table","get","concat","apiUri","then","res","forEach","item","data","split","catch","error","START_MODIFICATION","modificationList","createReducer","SET_STEP","action","SUBMIT_MODIFICATION","index","objectSpread","fixed","fixedValue","HIDE_MODIFICATION","GO_NEXT_ERROR","GO_PREV_ERROR","SELECT_ERROR","SHOW_CONFIRMATION_MODAL","HIDE_CONFIRMATION_MODAL","setStep","steps","title","isModalDisplay","selectedStep","isModification","modificationIndex","fixedIndex","IMPORT_FLOWS","UPDATE_FLOWS","errors","field","columnNumber","indexOf","rowNumber","SummaryTable","_ref","className","onSelectError","columnNames","style","position","width","height","columnName","key","errorIndex","value","message","handleSelectError","columnIndex","isNull","components","length","isOutlined","isColor","onClick","ContextTable","flows","modificationItem","errorColumn","rowIndex","wordBreak","FormatCorrection","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","hydrateState","_this$props","descriptor","fieldSchema","Field","constraints","enum","fieldValid","validateField","castValue","setState","valid","handleChange","event","target","handleSubmitForm","_this$state","onSubmitForm","prevProps","_this$state2","isSubmitDisabled","printValue","isSize","onChange","isDisabled","ForeignKeyCorrection","schema","fieldError","_this$props2","ModificationComponent","onSubmitModification","handleSubmitModification","errorType","components_FormatCorrection","fields","find","f","getDescriptor","ForeignkeyCorrection","components_ContextTable","RANKED_FIELDS","flow","unit","species_bullions","transport_type","statistical_period","partner_sum","world_trade_type","notes","source","reporting","partner","export_import|special_general","currency|year|reporting","VALIDATE_TABLE_REQUEST","VALIDATE_TABLE_SUCCESS","VALIDATE_TABLE_FAILURE","VALIDATE_HEADER_REQUEST","VALIDATE_HEADER_SUCCESS","VALIDATE_HEADER_FAILURE","joinForeignKeyFields","join","getCollectedErrors","foreignKeys","allFields","foreignKeysList","reduce","getForeignKeyFields","d","formatFields","filter","foreignKeysFields","foreignKey","errorTypes","formatErrors","defineProperty","foreignKeyErrors","joinedFields","row","selectedErrors","err","push","joinedColumn","values","tableValidated","schemaFeedback","headerFeedback","getSchema","schemaValidation","resources","resource","getRelations","getForeignKeys","relations","tableName","reference","DataModification","nonFixedList","selectError","components_SummaryTable","display","justifyContent","DataModification_ModificationComponent","submitModification","updateFlows","hideModification","marginLeft","goPrevError","goNextError","modification","ui","downloadFile","array","fileName","ext","file","header","csvString","csvFormatRows","File","FileSaver","saveAs","sheet","XLSX","utils","aoa_to_sheet","wb","book_new","book_append_sheet","writeFile","DataPublish","_this$props$flows","exportFlows","HeaderValidation","diff","headerNames","fieldNames","diffLength","difference","validationMap","Math","abs","FileUpload","importFlows","validateHeader","status","asyncToGenerator","regenerator_default","mark","_callee2","wrap","_context2","prev","next","Table","load","slice","sent","read","limit","headers","t0","console","stop","maxSize","onDrop","_ref2","slicedToArray","reject","reader","FileReader","onload","bstr","result","wsname","SheetNames","ws","Sheets","sheet_to_json","defval","blankrows","undefined","onerror","readAsBinaryString","parseSheet","csvParseRows","tsvParse","readAsText","parseTable","onDropRejected","log","textAlign","components_HeaderValidation","ConfirmationModal","onSelectDiscard","onSelectDownload","isActive","closeModal","bodyContent","onAction","footerActions","label","OverviewTable","collectedErrors","orderedErrors","sortBy","totalErrors","groupedErrors","groupBy","v","distinctErrors","cellValue","SchemaValidation","validateTable","re","loader","components_OverviewTable","errorsList","groupedErrorsList","groupedValue","yearRange","fieldName","years","min","max","replace","getOrderedErrors","startModification","_callee4","_context5","delegateYield","_callee3","tableLength","chunk","i","_loop","_context4","offset","chunkTable","rows","chunkErrors","_context3","forceCast","t1","Layout","onSetStep","children","hasConfig","isConfig","step","isSelectedStep","isStepDisabled","isWorkspace","isSecondary","isPrimary","showModal","hideModal","containers_DataPrep","containers_Layout","containers_FileUpload","containers_SchemaValidation","containers_DataModification","containers_DataPublish","renderChildren","components_ConfirmationModal","Boolean","window","location","hostname","match","combineReducers","arguments","csvParse","Base64","decode","content","year","JSON","parse","persistConfig","storage","persistedReducer","persistReducer","rootReducer","store","middleware","thunk","composedEnhancers","compose","apply","applyMiddleware","createStore","persistor","persistStore","configureStore","ReactDOM","render","es","src_App_0","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.48c99efa.chunk.js","sourcesContent":["var map = {\n\t\"./geojson.json\": 260,\n\t\"./table-schema.json\": 676,\n\t\"./topojson.json\": 261\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 675;","var map = {\n\t\"./geojson.json\": 344,\n\t\"./table-schema.json\": 865,\n\t\"./topojson.json\": 345\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 864;","var map = {\n\t\"./data-package.json\": 904,\n\t\"./data-resource.json\": 905,\n\t\"./fiscal-data-package.json\": 906,\n\t\"./registry.json\": 907,\n\t\"./tabular-data-package.json\": 908,\n\t\"./tabular-data-resource.json\": 909\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 903;","import {get} from 'axios';\nimport {apiUri, repoUrl} from '../../config/default';\nimport { Base64 } from 'js-base64';\n\nexport const FETCH_TABLE_REQUEST = 'FETCH_TABLE_REQUEST';\nexport const FETCH_TABLE_SUCCESS = 'FETCH_TABLE_SUCCESS';\nexport const FETCH_TABLE_FAILURE = 'FETCH_TABLE_FAILURE';\n\nexport const FETCH_DATAPACKAGE_REQUEST = 'FETCH_DATAPACKAGE_REQUEST';\nexport const FETCH_DATAPACKAGE_SUCCESS = 'FETCH_DATAPACKAGE_SUCCESS';\nexport const FETCH_DATAPACKAGE_FAILURE = 'FETCH_DATAPACKAGE_FAILURE';\n\nexport const FETCH_TABLES_REQUEST = 'FETCH_TABLES_REQUEST';\nexport const FETCH_TABLES_SUCCESS = 'FETCH_TABLES_SUCCESS';\nexport const FETCH_TABLES_FAILURE = 'FETCH_TABLES_FAILURE';\n\n\n\nexport const tablesList = [\n  {\n    name: 'sources',\n    path: 'data/sources.csv'\n  },\n  // {\n  //   name: 'RICentities',\n  //   path: 'data/RICentities.csv'\n  // },\n  // {\n  //   name: 'RICentities_groups',\n  //   path: 'data/RICentities_groups.csv'\n  // },\n  {\n    name: 'currencies',\n    path: 'data/currencies.csv'\n  },\n  {\n    name: 'entity_names',\n    path: 'data/entity_names.csv'\n  },\n  // {\n  //   name: 'exchange_rates',\n  //   path: 'data/exchange_rates.csv'\n  // },\n  {\n    name: 'expimp_spegen',\n    path: 'data/expimp_spegen.csv'\n  }\n];\n\n/**\n * ACTIONS\n */\n export const fetchTable = (payload) => (dispatch) => {\n  const {branch, table} = payload\n  dispatch({\n    type: FETCH_TABLE_REQUEST,\n    payload\n  });\n  return get(`${apiUri}/${table.path}?ref=${branch}`)\n    .then((res) => dispatch({\n      type: FETCH_TABLE_SUCCESS,\n      payload: {\n        ...payload,\n        data: res.data\n      }\n    })).catch((error) => dispatch({\n      type: FETCH_TABLE_FAILURE,\n      payload,\n      error\n    }))\n}\n\nexport const fetchAllTables = (payload) => (dispatch) => {\n  const {branch} = payload;\n  dispatch({\n    type: FETCH_TABLES_REQUEST,\n  });\n  Promise.all(tablesList.map((table) => {\n    return get(`${apiUri}/${table.path}?ref=${branch}`)\n  }))\n  .then((res) => {\n    let tables = {}\n    res.forEach((item) => {\n      const id = item.data.name.split('.')[0]\n      tables[id] = item.data\n    })\n    dispatch({\n      type: FETCH_TABLES_SUCCESS,\n      payload: tables\n    })\n  })\n  .catch((error) => dispatch({\n    type: FETCH_TABLES_FAILURE,\n    payload,\n    error\n  }))\n}\n\nexport const fetchDatapackage = () => (dispatch) => {\n  dispatch({\n    type: FETCH_DATAPACKAGE_REQUEST,\n  });\n  return get(`${apiUri}/datapackage.json?ref=master`)\n    .then((res) => dispatch({\n      type: FETCH_DATAPACKAGE_SUCCESS,\n      payload: res.data\n    })).catch((error) => dispatch({\n      type: FETCH_DATAPACKAGE_FAILURE,\n      error\n    }))\n}\n\n\n/**\n * REDUCER\n */\n\nconst initialState = {}\n\nexport default function reducer(state = initialState, action){\n  const {payload} = action;\n  switch (action.type){\n    case FETCH_TABLES_SUCCESS:\n      // newDescriptor = {...state.descriptor};\n      // newDescriptor.resources.forEach((resource)=> {\n      //   if (payload[resource.name]) {\n      //     delete resource.path;\n      //     resource.data = csvParseRows(atob(payload[resource.name].content))\n      //   }\n      // });\n      return {\n        ...state,\n        tables: payload\n      }\n    case FETCH_DATAPACKAGE_SUCCESS:\n      return {\n        ...state,\n        datapackage: payload,\n        descriptor: JSON.parse(Base64.decode(payload.content))\n      }\n    default:\n      return state\n  }\n}","import React from 'react';\nimport {connect} from 'react-redux'\n\nimport { \n  fetchAllTables,\n  fetchDatapackage\n} from '../../redux/modules/repoData';\n\nclass DataPrep extends React.Component {\n  componentDidMount() {\n    const {repoData} = this.props\n    if (!repoData.tables && !repoData.datapackage) {\n      this.props.fetchDatapackage()\n      this.props.fetchAllTables({branch:'master'})\n    }\n  }  \n\n  render () {\n    const {repoData} = this.props\n    return (\n      <div>\n        {!repoData.tables && <span>loading tables</span>}\n        {!repoData.datapackage && <span>loading datapackage</span>}\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n repoData: state.repoData\n})\n\nexport default connect(mapStateToProps, {\n  fetchAllTables,\n  fetchDatapackage\n})(DataPrep);","import DataPrep from './DataPrep'\n\nexport default DataPrep","import { createReducer } from 'redux-starter-kit';\n\nimport {SET_STEP} from './ui';\n\nexport const SUBMIT_MODIFICATION = 'SUBMIT_MODIFICATION';\nexport const START_MODIFICATION = 'START_MODIFICATION';\n\nexport const startModification = (payload) => ({\n  type: START_MODIFICATION,\n  payload\n});\n\nexport const submitModification = (payload) => ({\n  type: SUBMIT_MODIFICATION,\n  payload\n});\n\n\nconst initialState = {\n  modificationList: null\n}\n\nexport default createReducer(initialState, {\n  SET_STEP: (state, action) => {\n    const {payload} = action;\n    if (payload.id === '0') {\n      return initialState\n    }\n  },\n  START_MODIFICATION: (state, action) => {\n    const {payload} = action;\n    state.modificationList = payload\n  },\n  SUBMIT_MODIFICATION: (state, action) => {\n    const {payload} = action;\n    state.modificationList[payload.index] = {\n      ...state.modificationList[payload.index],\n      fixed: true,\n      fixedValue: payload.fixedValue\n    }\n  }\n})\n\n","import {\n  START_MODIFICATION,\n} from './modification';\n\nexport const SET_STEP = 'SET_STEP';\n\n// export const SHOW_MODIFICATION = 'SHOW_MODIFICATION';\nexport const HIDE_MODIFICATION = 'HIDE_MODIFICATION';\n\nexport const GO_NEXT_ERROR = 'GO_NEXT_ERROR';\nexport const GO_PREV_ERROR = 'GO_PREV_ERROR';\nexport const SELECT_ERROR = 'SELECT_ERROR';\n\nexport const SHOW_CONFIRMATION_MODAL = 'SHOW_CONFIRMATION_MODAL';\nexport const HIDE_CONFIRMATION_MODAL = 'HIDE_CONFIRMATION_MODAL';\n\nexport const setStep = (payload) => ({\n  type: SET_STEP,\n  payload\n});\n\nexport const showModal = () => ({\n  type: SHOW_CONFIRMATION_MODAL\n})\n\nexport const hideModal = () => ({\n  type: HIDE_CONFIRMATION_MODAL\n})\n\nexport const hideModification = () => ({\n  type: HIDE_MODIFICATION,\n});\n\nexport const selectError = (payload) => ({\n  type: SELECT_ERROR,\n  payload\n});\n\nexport const goPrevError = () => ({\n  type: GO_PREV_ERROR,\n});\n\nexport const goNextError = () => ({\n  type: GO_NEXT_ERROR,\n});\n\nconst steps = [\n  {\n    id: '0',\n    name: 'Upload file',\n    title: 'Choose a file'\n  },\n  {\n    id: '1',\n    name: 'Schema Validation',\n    title: 'Schema validation against datapackage'\n  },\n  {\n    id: '2',\n    name: 'Error Fixing',\n    title: 'Fix errors by fields'\n  },\n  {\n    id: '3',\n    name: 'Export/Publish Data',\n    title: 'Export or Publish your data to Github'\n  }\n];\n\nconst initialState = {\n  steps, \n  isModalDisplay: false,\n  selectedStep: steps[0],\n  isModification: false,\n  modificationIndex: 0,\n  fixedIndex: []\n}\n\nexport default function reducer(state = initialState, action){\n  const {payload} = action;\n  switch (action.type){\n    case SET_STEP:\n      return {\n        ...initialState,\n        selectedStep: steps.find((step) => payload.id === step.id),\n      }\n    case SHOW_CONFIRMATION_MODAL:\n      return {\n        ...state,\n        isModalDisplay: true\n      }\n    case HIDE_CONFIRMATION_MODAL:\n      return {\n        ...state,\n        isModalDisplay: false\n      }\n    case START_MODIFICATION:\n      return {\n        ...state,\n        isModification: true,\n        modificationIndex: 0\n      }\n    case HIDE_MODIFICATION:\n      return {\n        ...state,\n        isModification: false,\n        modificationIndex: 0\n      }\n    case SELECT_ERROR: \n      return {\n        ...state,\n        isModification: true,\n        modificationIndex: payload.index\n      }\n    case GO_NEXT_ERROR:\n      return {\n        ...state,\n        modificationIndex: state.modificationIndex + 1\n      }\n    case GO_PREV_ERROR:\n      if (state.modificationIndex === 0) return;\n      return {\n        ...state,\n        modificationIndex: state.modificationIndex - 1\n      }\n    default:\n     return state\n  }\n}","import { createReducer } from 'redux-starter-kit';\n\nimport {SET_STEP} from './ui';\n\nexport const UPDATE_FLOWS = 'UPDATE_FLOWS';\nexport const IMPORT_FLOWS = 'IMPORT_FLOWS';\nexport const EXPORT_FLOWS = 'EXPORT_FLOWS';\n\nexport const updateFlows = (payload) => ({\n  type: UPDATE_FLOWS,\n  payload\n});\n\nexport const importFlows = (payload) => ({\n  type: IMPORT_FLOWS,\n  payload\n});\n\nexport const exportFlows = (payload) => ({\n  type: EXPORT_FLOWS\n});\n\n\nconst initialState = {}\n\nexport default createReducer(initialState, {\n  SET_STEP: (state, action) => {\n    const {payload} = action;\n    if (payload.id === '0') {\n      return initialState\n    }\n  },\n  IMPORT_FLOWS: (state, action) => {\n    const {payload} = action;\n    return payload\n  },\n  UPDATE_FLOWS: (state, action) => {\n    const {payload} = action;\n    const {errors, field, fixedValue} = payload;\n    const columnNumber = state.data[0].indexOf(field);\n    errors.forEach((error) => {\n      state.data[error.rowNumber -1][columnNumber] = fixedValue;\n    })\n  }\n})\n","import React from 'react';\nimport {isNull} from 'lodash';\nimport {\n  HelpPin,\n  Button,\n} from 'design-workshop';\n\nconst SummaryTable = ({\n  className,\n  modificationList,\n  onSelectError\n}) => {\n  const columnNames = ['', 'Field', 'Value', 'Rows', '']\n\n  return (\n    <div style={{position: 'relative', width: '100%', height: '70vh'}}>\n      \n      <div className={`action-table ${className}`}>\n        <div className={'action-table-header'}>\n          {\n            columnNames.map((columnName, index) => {\n              return (\n                <div key={index} className=\"table-cell\">\n                  <span className={columnName === 'Value' ? 'has-text-danger': 'has-text-black'}>{columnName}</span>\n                </div>\n              );\n            })\n          }\n        </div>\n        <div className={'action-table-main'}>\n          {\n            modificationList.map((item, errorIndex) => {\n              const {field, errors, value, message} = item;\n              const handleSelectError = () => {\n                onSelectError(errorIndex)\n              }\n              return (\n                <div key={errorIndex} className=\"table-row\">\n                  {\n                    columnNames.map((columnName, columnIndex) => {\n                      switch (columnIndex) {\n                        case 0:\n                        default:\n                          return (<div key={columnIndex} className=\"table-cell\">{errorIndex + 1}</div>)\n                        case 1:\n                          return (<div key={columnIndex} className=\"table-cell\">{field}</div>);\n                        case 2:\n                          return (\n                            <div key={columnIndex} className=\"table-cell\">\n                              <span className=\"has-text-danger\">{isNull(value)? 'null' : value }</span>\n                              <HelpPin>{message}</HelpPin>\n                            </div>);\n                        case 3:\n                          return (\n                            <div key={columnIndex} className=\"table-cell\">\n                              <span className={item.fixed ? 'has-text-success': 'has-text-black'}>{errors.length} {item.fixed && 'rows affected'}</span>\n                            </div>);\n                        case 4:\n                          return (\n                            <div key={columnIndex} className=\"table-cell\">\n                              <Button isOutlined isColor={item.fixed? 'success': 'info'} onClick={handleSelectError}>{item.fixed ? 'fixed': 'fix error'}</Button>\n                            </div>\n                          )\n                      }\n                    })\n                  }\n                </div>\n              )\n            })\n          }\n        </div>\n        {/* <div className={'action-table-footer'}></div> */}\n      </div>\n    </div>\n  );\n}\n\nexport default SummaryTable","import React from 'react';\n\nconst ContextTable = ({\n  className,\n  flows,\n  modificationItem\n}) => {\n  const columnNames = flows[0];\n  const {errors, field} = modificationItem;\n\n  return (\n    <div style={{position: 'relative', width: '100%', height: '20vh'}}>\n      <div className={`action-table ${className}`}>\n        <div className={'action-table-header'}>\n          {\n            columnNames.map((columnName, index) => {\n              const errorColumn = field.indexOf(columnName) !== -1 ? true : false\n              return (\n                <div key={index} className=\"table-cell\">\n                  <span className={errorColumn ? 'has-text-danger': 'has-text-black'}>{columnName}</span>\n                </div>\n              );\n            })\n          }\n        </div>\n        <div className={'action-table-main'} style={{height: '100%'}}>\n            {\n              errors.map((error, rowIndex) => {\n                return (\n                  <div key={rowIndex} className=\"table-row\">\n                    {\n                      columnNames.map((columnName, columnIndex) => {\n                        const errorColumn = field.indexOf(columnName) !== -1 ? true : false\n\n                      return (\n                        <div key={columnIndex} className=\"table-cell\" style={{ wordBreak: 'break-all' }}>\n                          <span className={errorColumn ? 'has-text-danger': 'has-text-black'}>\n                            {flows[error.rowNumber - 1][columnIndex]}\n                          </span>\n                        </div>\n                      );\n                    })\n                  }\n                  </div>\n                );\n              })\n            }\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default ContextTable;","import React from 'react';\nimport {Field, Schema} from 'tableschema';\n\nimport {\n  Columns,\n  Column,\n  Button,\n  Field as FieldContainer,\n  Label,\n  Control,\n  Input,\n  Help,\n  Select\n} from 'design-workshop'\n\nclass FormatCorrection extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = this.hydrateState();\n  }\n\n  componentDidUpdate (prevProps) {\n   if (this.props.modificationIndex !== prevProps.modificationIndex) {\n      const state = this.hydrateState()\n      this.setState({\n        ...state\n      })\n   }\n  }\n\n  hydrateState = () => {\n    const {modificationItem, descriptor} = this.props;\n    const fieldSchema = new Field(descriptor);\n\n    let fixedValue = modificationItem.value;\n    if (modificationItem.fixedValue) fixedValue = modificationItem.fixedValue;\n    else if (fieldSchema.constraints && fieldSchema.constraints.enum) {\n      fixedValue = fieldSchema.constraints.enum[0];\n    }\n    return {\n      fieldSchema,\n      fixedValue,\n      fieldValid: null\n    }\n  }\n\n  validateField = (value) => {\n    const {fieldSchema} = this.state;\n    try {\n      fieldSchema.castValue(value);\n      this.setState({\n        fixedValue: value,\n        fieldValid: {\n          valid: true\n        }\n      })\n    } catch(error) {\n      this.setState({\n        fixedValue: value,\n        fieldValid: {\n          valid: false,\n          error\n        }\n      })\n    }\n  }\n\n  handleChange = (event) => {\n    this.validateField(event.target.value)\n  }\n\n  handleSubmitForm = () => {\n    const {fixedValue, fieldValid} = this.state;\n    if(!fixedValue || fixedValue.length === 0 || !fieldValid.valid) return;\n    this.props.onSubmitForm(fixedValue);\n  }\n\n  render() {\n    const {modificationItem} = this.props;\n    const {value, message, errors}= modificationItem;\n    const {fieldSchema, fixedValue, fieldValid} = this.state;\n    const isSubmitDisabled = !fieldValid || !fieldValid.valid\n    const printValue = fixedValue.length === 0 ? 'null' : fixedValue;\n    \n    return (\n      <div style={{height: '60vh'}}>\n        <form>\n          <Columns>\n            <Column isSize='1/2'>\n              <FieldContainer>\n                <Label>Original value of \"{fieldSchema.name}\":</Label>\n                {/* <Input value={value} disabled /> */}\n                <div className=\"has-text-danger\">{value}</div>\n                <Help isColor=\"danger\">{message}</Help>\n              </FieldContainer>\n              {\n                (!fieldSchema.constraints || !fieldSchema.constraints.enum) &&\n                <FieldContainer>\n                  <Label>Input a new value of \"{fieldSchema.name}\"</Label>\n                  <Control>\n                    <Input\n                      value={this.state.fixedValue}\n                      onChange={this.handleChange} />\n                  </Control>\n                  {\n                    fieldValid!==null && !fieldValid.valid && <Help isColor=\"danger\">{fieldValid.error.message}</Help>\n                  }\n                  {\n                    !isSubmitDisabled && fieldValid!==null && fieldValid.valid &&\n                      <Help isColor=\"success\">change {value} to {printValue}, total {errors.length} rows affected</Help>\n                  }\n                </FieldContainer>\n              }\n              \n              {\n                fieldSchema.constraints && fieldSchema.constraints.enum &&\n                <FieldContainer>\n                  <Label>Select a value of \"{fieldSchema.name}\" from:</Label>\n                  <Control>\n                    <Select value={this.state.fixedValue} onChange={this.handleChange}>\n                      {\n                        fieldSchema.constraints.enum.map((item, index) => {\n                          return (\n                            <option key={index}>{item}</option>\n                          )\n                        })\n                      }\n                    </Select>\n                    {\n                      !isSubmitDisabled &&\n                        <Help isColor=\"success\">change {value} to {printValue}, total {errors.length} rows affected</Help>\n                    }\n                  </Control>\n                </FieldContainer>\n              }\n  \n              <FieldContainer>\n                <Control>\n                  <Button isColor=\"info\" isDisabled={isSubmitDisabled} onClick={this.handleSubmitForm}>Confirm this fix</Button>\n                </Control>\n              </FieldContainer>\n            </Column>\n          </Columns>\n  \n        </form>    \n      </div>\n    )\n  }\n}\n\nexport default FormatCorrection;","import React from 'react';\nimport {Field, Schema} from 'tableschema';\n\nimport {\n  Columns,\n  Column,\n  Button,\n  Field as FieldContainer,\n  Label,\n  Control,\n  Input,\n  Help,\n  Select\n} from 'design-workshop'\n\nclass ForeignKeyCorrection extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = this.hydrateState()\n  }\n\n  componentDidUpdate (prevProps) {\n   if (this.props.modificationIndex !== prevProps.modificationIndex) {\n      const state = this.hydrateState()\n      this.setState({\n        ...state\n      })\n   }\n  }\n\n  hydrateState = () => {\n    const {modificationItem, schema} = this.props;\n    const {field}= modificationItem;\n    return {}\n    // const descriptor = schema.fields.find((f) => f.name === field)\n    // const fieldSchema = new Field(descriptor);\n\n    // let fixedValue = '';\n    // if (modificationItem.fixedValue) fixedValue = modificationItem.fixedValue;\n    // else if (schema.constraints && schema.constraints.enum) {\n    //   fixedValue = schema.constraints.enum[0];\n    // }\n    // return {\n    //   fieldSchema,\n    //   fixedValue,\n    //   fieldError: null\n    // }\n  }\n\n  handleChange = (event) => {\n    this.setState({\n      fixedValue: event.target.value\n    });\n    this.validateField(event.target.value);\n  }\n\n  handleSubmitForm = () => {\n    const {fixedValue, fieldError} = this.state;\n    if(!fixedValue || fixedValue.length === 0 || fieldError) return;\n    this.props.onSubmitForm(fixedValue);\n  }\n\n  render() {\n    const {modificationItem, schema} = this.props;\n    const {value, message, errors, field}= modificationItem;\n    const {fieldSchema, fixedValue, fieldError} = this.state;\n\n    const isSubmitDisabled = !fixedValue || fixedValue.length === 0 || fieldError;\n    // if (errorType === 'ERROR_FOREIGN_KEY') {\n    //   const foreignKeys = schema.foreignKeys.find((f) => f.fields.indexOf(field) !==-1)\n    //   fieldSchema = {\n    //     ...fieldSchema,\n    //     foreignKeys\n    //   }\n    // }\n\n    return (\n      <div style={{height: '60vh'}}>\n        <form>\n          <Columns>\n            <Column isSize='1/2'>\n              <FieldContainer>\n                <Label>Original value of \"{field}\":</Label>\n                {/* <Input value={value} disabled /> */}\n                <div className=\"has-text-danger\">{value}</div>\n                <Help isColor=\"danger\">{message}</Help>\n              </FieldContainer>\n              <FieldContainer>\n                <Control>\n                  <Button isColor=\"info\" isDisabled={isSubmitDisabled} onClick={this.handleSubmitForm}>Confirm this fix</Button>\n                </Control>\n              </FieldContainer>\n            </Column>\n          </Columns>\n  \n        </form>    \n        {\n          !isSubmitDisabled &&\n            <span>change {value} to {this.state.fixedValue}, total {errors.length} rows affected</span>\n        }\n      </div>\n    )\n  }\n}\n\nexport default ForeignKeyCorrection;","import React from 'react';\nimport ContextTable from '../../components/ContextTable'\nimport FormatCorrection from '../../components/FormatCorrection';\nimport ForeignkeyCorrection from '../../components/ForeignkeyCorrection';\n\nconst ModificationComponent = ({\n  className,\n  flows,\n  schema,\n  modificationItem,\n  modificationIndex,\n  onSubmitModification\n}) => {\n  const handleSubmitModification = (fixedValue) => {\n    return onSubmitModification({\n      ...modificationItem,\n      fixedValue,\n      index: modificationIndex\n    })\n  }\n  const getDescriptor = () => {\n    const {field}= modificationItem;\n    const descriptor = schema.fields.find((f) => f.name === field)\n    return descriptor;\n  }\n\n  return (\n    <div>\n      {\n        modificationItem.errorType === 'ERROR_FORMAT' &&\n        <FormatCorrection \n          descriptor={getDescriptor()} \n          modificationItem={modificationItem}\n          modificationIndex={modificationIndex}\n          onSubmitForm={handleSubmitModification} \n        /> \n      }\n        {\n        modificationItem.errorType === 'ERROR_FOREIGN_KEY' &&\n        <ForeignkeyCorrection \n          schema={schema}\n          modificationItem={modificationItem}\n          modificationIndex={modificationIndex}\n          onSubmitForm={handleSubmitModification} \n        /> \n      }\n      <ContextTable flows={flows} modificationItem={modificationItem} />\n    </div>\n  );\n}\n\nexport default ModificationComponent;","export const MAXIMUM_FILE_SIZE = 10000000;\nexport const DEFAULT_CHUNK_SIZE = 100;\n\nexport const RANKED_FIELDS = {\n  \"id\": 0,\n  'flow': 1,\n  \"unit\": 2,\n  \"species_bullions\": 3,\n  \"transport_type\": 4,\n  \"statistical_period\": 5,\n  \"partner_sum\": 6,\n  \"world_trade_type\": 7,\n  \"notes\": 8,\n  \"source\": 9,\n  \"reporting\": 10,\n  \"partner\": 11,\n  \"export_import|special_general\": 12,\n  \"currency|year|reporting\": 13\n}","import { createSelector } from 'reselect'\n\nimport {Package} from 'datapackage';\nimport {Table} from 'tableschema';\nimport {Base64} from 'js-base64';\n\nimport {\n  csvParse,\n} from 'd3-dsv';\n\nimport {repoUrl} from '../../config/default';\nimport {SET_STEP} from './ui';\nimport {IMPORT_FLOWS} from './flows';\n\nimport {DEFAULT_CHUNK_SIZE} from '../../constants';\n\nimport {\n  FETCH_TABLES_SUCCESS,\n  FETCH_DATAPACKAGE_SUCCESS,\n} from './repoData';\n\nexport const VALIDATE_RESOURCE_REQUEST = 'VALIDATE_RESOURCE_REQUEST';\nexport const VALIDATE_RESOURCE_SUCCESS = 'VALIDATE_RESOURCE_SUCCESS';\nexport const VALIDATE_RESOURCE_FAILURE = 'VALIDATE_RESOURCE_FAILURE';\n\nexport const VALIDATE_TABLE_REQUEST = 'VALIDATE_TABLE_REQUEST';\nexport const VALIDATE_TABLE_SUCCESS = 'VALIDATE_TABLE_SUCCESS';\nexport const VALIDATE_TABLE_FAILURE = 'VALIDATE_TABLE_FAILURE';\n\nexport const VALIDATE_HEADER_REQUEST = 'VALIDATE_HEADER_REQUEST';\nexport const VALIDATE_HEADER_SUCCESS = 'VALIDATE_HEADER_SUCCESS';\nexport const VALIDATE_HEADER_FAILURE = 'VALIDATE_HEADER_FAILURE';\n\n// not used yet\nexport const validateResource = (payload) => (dispatch) => {\n  const {descriptor, relations} = payload;\n  dispatch(async () => {\n    let resource;\n    try {\n      const dataPackage = await Package.load(descriptor, {basePath: repoUrl});\n      resource = dataPackage.getResource('flows');\n      \n      dispatch({\n        type: VALIDATE_RESOURCE_SUCCESS,\n        payload: {\n          valid: true\n        }\n      })\n    } catch (error) {\n      if (error.multiple) {\n        dispatch({\n          type: VALIDATE_RESOURCE_FAILURE,\n          payload : {\n            rowNumber: error.rowNumber,\n            messages: error.errors.map((err) => { \n              return {\n              ...err,\n              message: err.message\n              }\n            })\n          }\n        })\n      } else {\n        dispatch({\n          type: VALIDATE_RESOURCE_FAILURE,\n          payload : {\n            rowNumber: error.rowNumber,\n            messages: [\n              {\n                ...error,\n                message: error.message\n              }\n            ]\n          }\n        })\n      }\n    }\n  })\n}\n\nexport const validateHeader = (payload) => (dispatch) => {\n  const {source, schema} = payload;\n  dispatch({\n    type: VALIDATE_HEADER_REQUEST,\n    payload: {\n      ...payload,\n      status: 'loading'\n    }\n  })\n  dispatch(async() => {\n    let table;\n    try {\n      table = await Table.load(source.slice(0,2), {schema});\n      await table.read({limit: 1});\n      dispatch({\n        type: VALIDATE_HEADER_SUCCESS,\n        payload: {\n          status: 'done',\n          valid: true,\n          headers: table.headers\n        }\n      })\n    } catch (error) {\n      console.error(error)\n      if (error.type !== 'ERROR_HEADER') {\n        dispatch({\n          type: VALIDATE_HEADER_SUCCESS,\n          payload: {\n            status: 'done',\n            valid: true,\n            headers: table.headers\n          }\n        })\n      } else {\n        dispatch({\n          type: VALIDATE_HEADER_FAILURE,\n          valid: false,\n          status: 'done',\n          payload: error\n        })\n      }\n    }\n  })\n}\n\nconst joinForeignKeyFields = (fields) => {\n  if (typeof(fields) === 'string') return fields;\n  else return fields.join('|');\n};\n\nconst getForeignKeyFields = (fields) => {\n  return fields.reduce((res, field) => {\n    if (typeof(field) === 'string') return res.concat([field]);\n    else return res.concat(field)\n  }, []);\n} \n\nconst getCollectedErrors = (flows, schema, errors) => {\n  const {fields, foreignKeys} = schema;\n\n  const allFields = fields.map((field)=> field.name);\n  const foreignKeysList = getForeignKeyFields(foreignKeys.map((d) => d.fields));\n\n  const formatFields = fields.filter((field) => foreignKeysList.indexOf(field.name) === -1)\n  const foreignKeysFields = foreignKeys.map((foreignKey) => joinForeignKeyFields(foreignKey.fields));\n\n  const errorTypes = ['ERROR_FORMAT', 'ERROR_FOREIGN_KEY'];\n\n  const formatErrors = formatFields.reduce((res, field) => {\n    return {\n      ...res,\n      [field.name]: {\n        name: field.name,\n        schema: field,\n        errorType: 'ERROR_FORMAT',\n        errors: []\n      }\n    }\n  }, {});\n\n  const foreignKeyErrors = foreignKeys.reduce((res, foreignKey) => {\n    const joinedFields = joinForeignKeyFields(foreignKey.fields);\n    // const foreignKeySchema = fields.find((field) => field.name === foreignKey.fields)\n    return {\n      ...res,\n      [joinedFields]: {\n        name: joinedFields,\n        ...foreignKey,\n        errorType: 'ERROR_FOREIGN_KEY',\n        errors: []\n      }\n    }\n  }, {});\n\n  errors.forEach((error)=>{\n    const row = flows[error.rowNumber -1];\n    const rowNumber = error.rowNumber;\n    errorTypes.forEach((errorType) => {\n      const selectedErrors = error.errors.find((err) => err.type === errorType)\n      if(!selectedErrors) return;\n      if(errorType === 'ERROR_FORMAT') {\n        allFields.forEach((field, columnIndex) => {\n          selectedErrors.errors.forEach((err) => {\n            if (err.columnNumber === columnIndex + 1 && foreignKeysList.indexOf(field) === -1) {\n              const item = {\n                rowNumber,\n                errorType,\n                columnNumber: err.columnNumber,\n                field,\n                value: row[columnIndex],\n                message: err.message\n              }\n              formatErrors[field].errors.push(item)\n            }\n          })\n        })\n      }\n\n      else if (errorType === 'ERROR_FOREIGN_KEY') {\n        foreignKeysFields.forEach((fields) => {\n          selectedErrors.errors.forEach((err) => {\n            // const fieldsList = fields.split('|');\n            const joinedColumn = joinForeignKeyFields(err.columnName);\n            if (joinedColumn === fields) {\n              const values = err.columnName.map((field) => {\n                const columnIndex = allFields.indexOf(field);\n                return row[columnIndex]\n              })\n              const item = {\n                rowNumber,\n                errorType,\n                columnName: err.columnName,\n                field: joinedColumn,\n                value: values.join('|'),\n                message: err.message\n              }\n              foreignKeyErrors[fields].errors.push(item)\n            }\n          })\n        })\n      }\n    })\n  });\n\n  Object.keys(formatErrors).forEach((columnName) => {\n    if(!formatErrors[columnName].errors.length) {\n      delete formatErrors[columnName]\n    }\n  });\n\n  Object.keys(foreignKeyErrors).forEach((columnName) => {\n    if(!foreignKeyErrors[columnName].errors.length) {\n      delete foreignKeyErrors[columnName]\n    }\n  });\n  \n  return {\n    ...formatErrors,\n    ...foreignKeyErrors\n  }\n}\n\nexport const validateTable = (payload) => (dispatch) => {\n  const {source, schema, relations} = payload;\n  dispatch(async() => {\n    try {\n      const tableLength = source.length;\n      const chunk = DEFAULT_CHUNK_SIZE;\n      let i = 0\n      let errors = []\n      for(i; i < tableLength; i += chunk) {\n        dispatch({\n          type: VALIDATE_TABLE_REQUEST,\n          payload: {  \n            status: 'loading',\n            loader: `validating ${i} rows`\n          }\n        })\n        const offset = i / chunk\n        const chunkTable = [source[0]].concat(source.slice(i+1-offset, i+chunk-offset))\n        const table = await Table.load(chunkTable, {schema});\n        const rows = await table.read({forceCast: true, relations});\n        const chunkErrors = rows.filter((row) => row.errors)\n        if (chunkErrors.length) {\n          chunkErrors.forEach((error) => {\n            error.rowNumber = error.rowNumber + chunk * offset - offset\n          });\n          errors = errors.concat(chunkErrors)\n        }\n      }\n      // const table = await Table.load(source, {schema});\n      // const rows = await table.read({forceCast: true});\n      // const errors = rows.filter((row) => row.errors)\n      if (errors.length) {\n        dispatch({\n          type: VALIDATE_TABLE_FAILURE,\n          payload: {\n            status: 'done',\n            valid: false,\n            errors,\n            collectedErrors: getCollectedErrors(source, schema, errors)\n          }\n        })\n      } else {\n        dispatch({\n          type: VALIDATE_TABLE_SUCCESS,\n          payload: {\n            status: 'done',\n            valid: true\n          }\n        })\n      }\n    } catch (error) {\n      console.error(error)\n      dispatch({\n        type: VALIDATE_TABLE_FAILURE,\n        payload: error\n      })\n    }\n  })\n}\n\n/**\n * REDUCER\n */\n\nconst initialState = {\n  tableValidated: 'flows',\n  schemaFeedback: null,\n  headerFeedback: null,\n  tables: null\n}\n\nexport default function reducer(state = initialState, action){\n  const {payload} = action;\n  switch (action.type){\n    case SET_STEP: \n      if (payload.id === '0') {\n        return {\n          ...state,\n          schemaFeedback: null,\n          headerFeedback: null,\n        }\n      }\n      return state\n    case FETCH_TABLES_SUCCESS:\n      const tables = {}\n      Object.keys(payload).forEach((id) => {\n        tables[id] = csvParse(Base64.decode(payload[id].content), (d) => {\n          if (d.year) {\n            return {\n              ...d,\n              year: +d.year\n            }\n          }\n          return d\n        })\n      })\n      return {\n        ...state,\n        tables\n      }\n    case FETCH_DATAPACKAGE_SUCCESS:\n      return {\n        ...state,\n        descriptor: JSON.parse(Base64.decode(payload.content))\n      }\n    // case IMPORT_FLOWS:\n    //   newDescriptor = {...state.descriptor};\n    //   // newDescriptor.resources.forEach((resource)=> {\n    //   //   resource.path = `${repoUrl}/${resource.path}`\n    //   // });\n    //   delete newDescriptor.resources[0].path\n    //   // newDescriptor.resources[0].dialect = {\n    //   //   delimiter: ';',\n    //   //   header: true\n    //   // }\n    //   newDescriptor.resources[0].data = payload.data\n    //   return {\n    //     ...state,\n    //     descriptor: newDescriptor\n    //   }\n    // case VALIDATE_RESOURCE_SUCCESS:\n    //   return {\n    //     ...state,\n    //     schemaFeedback: {\n    //       valid: true\n    //     }\n    //   }\n    // case VALIDATE_RESOURCE_FAILURE:\n    //   return {\n    //     ...state,\n    //     schemaFeedback: {\n    //       valid: false,\n    //       ...payload\n    //     }\n    //   }\n    case VALIDATE_HEADER_REQUEST: \n    case VALIDATE_HEADER_FAILURE:\n    case VALIDATE_HEADER_SUCCESS:\n      return {\n        ...state,\n        headerFeedback: payload\n      }\n    case VALIDATE_TABLE_REQUEST: \n    case VALIDATE_TABLE_FAILURE:\n    case VALIDATE_TABLE_SUCCESS: \n      return {\n        ...state,\n        schemaFeedback: payload\n      }\n    default:\n    return state\n  }\n}\n\n/** \n* SELECTORS\n*/\n\nexport const getSchema = (state) => {\n  const {tableValidated} = state.schemaValidation;\n  const resource = state.schemaValidation.descriptor.resources.find((resource) => resource.name === tableValidated);\n  return resource.schema\n}\n\nexport const getRelations = (state) => {\n  const foreignKeys = getForeignKeys(state)\n  const relations = {};\n  foreignKeys.forEach((key) => {\n    const tableName = key.reference.resource;\n    relations[tableName] = state.schemaValidation.tables[tableName]\n  });\n  return relations;\n}\n\nexport const getForeignKeys = (state) => {\n  const {tableValidated} = state.schemaValidation;\n  const resource = state.schemaValidation.descriptor.resources.find((resource) => resource.name === tableValidated);\n  const {foreignKeys} = resource.schema;\n  return foreignKeys\n}","import React from 'react';\nimport {connect} from 'react-redux';\n\n\nimport {\n  Button,\n} from 'design-workshop';\n\nimport {\n  setStep,\n  hideModification,\n  selectError,\n  goNextError,\n  goPrevError\n} from '../../redux/modules/ui';\n\nimport {updateFlows} from '../../redux/modules/flows';\n\nimport {submitModification} from '../../redux/modules/modification';\n\nimport SummaryTable from '../../components/SummaryTable';\nimport ModificationComponent from './ModificationComponent';\n\nimport {getSchema} from '../../redux/modules/schemaValidation';\n\nclass DataModification extends React.Component {\n  \n  render() {\n    const {flows, schema, isModification, modificationIndex, modificationList} = this.props;\n    const nonFixedList = modificationList.filter((item) => item.fixed === false)\n\n    const handlePrevStep = () => this.props.setStep({id: '1'})\n    const handleNextStep = () => this.props.setStep({id: '3'})\n\n    const handlePrevError = () => {\n      if (modificationIndex > 0) this.props.goPrevError();\n    }\n\n    const handleNextError = () => {\n      if (modificationIndex < modificationList.length - 1) this.props.goNextError();\n    }\n\n    const handleSelectError = (index) => {\n      if (index < modificationList.length) {\n        this.props.selectError({\n          index\n        })\n      }\n    }\n\n    const handleSelectFirstError = () => {\n      this.props.selectError({\n        index: nonFixedList[0].index\n      })\n    }\n\n    const handleSubmitModification = (payload) => {\n      const {index} = payload;\n      this.props.submitModification(payload);\n      this.props.updateFlows(payload);\n      if ( index+1 < modificationList.length && nonFixedList.length > 0) {\n        handleSelectError(index+1)\n      }\n      else {\n        this.props.hideModification()\n      }\n    }\n    return (\n      <div>\n        {\n          !isModification &&\n            <div>\n              {\n                modificationList.length > 0 &&\n                <div className=\"has-text-danger has-text-weight-bold\">{modificationList.length} different errors need to modify</div>\n              }\n              {\n                modificationList && \n                <SummaryTable modificationList={modificationList} onSelectError={handleSelectError} />\n              }\n              <div style={{\n                display: 'flex',\n                justifyContent: 'space-between'\n              }}>\n                <Button \n                  isColor=\"info\" \n                  onClick={handlePrevStep}>\n                    Previous Step\n                </Button>\n                {\n                  nonFixedList.length === 0 ?\n                    <Button isColor=\"info\" onClick={handleNextStep}>\n                      Ready to publish\n                    </Button> :\n                    <Button isColor=\"info\" onClick={handleSelectFirstError}>\n                      Start fix error\n                    </Button>\n                }\n              </div>\n            </div>\n        }\n        {\n          isModification &&\n          <div>\n            <ModificationComponent \n              flows={flows}\n              schema={schema}\n              modificationIndex={modificationIndex}\n              modificationItem={modificationList[modificationIndex]} \n              onSubmitModification={handleSubmitModification} />\n            <div style={{\n              display: 'flex',\n              justifyContent: 'space-between'\n            }}>\n              <div>\n                <Button isColor=\"info\" onClick={this.props.hideModification}>\n                  Back to summary\n                </Button>\n              </div>\n              <span className=\"has-text-danger has-text-weight-bold\">{modificationIndex + 1} / {modificationList.length }</span>\n              <div>\n                {\n                  modificationIndex !==0 &&\n                    <Button isColor=\"info\" style={{marginLeft: '10px'}}\n                      onClick={handlePrevError}>\n                      Prev Error\n                    </Button>\n                }\n                {\n                  modificationIndex !== (modificationList.length-1) &&\n                    <Button isColor=\"info\" style={{marginLeft: '10px'}}\n                      onClick={handleNextError}>\n                      Next Error\n                    </Button>\n                }\n              </div>\n            </div>\n          </div>\n        }\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  flows: state.flows.data,\n  schema: state.schemaValidation.descriptor && getSchema(state),\n  schemaFeedback: state.schemaValidation.schemaFeedback,\n  modificationList: state.modification.modificationList,\n  isModification: state.ui.isModification,\n  modificationIndex: state.ui.modificationIndex\n})\n\nexport default connect(mapStateToProps, {\n  setStep,\n  updateFlows,\n  hideModification,\n  selectError,\n  goNextError,\n  goPrevError,\n  submitModification\n})(DataModification);","import DataModification from './DataModification'\n\nexport default DataModification","import XLSX from 'xlsx';\nimport {\n  csvFormatRows,\n} from 'd3-dsv';\n\nimport FileSaver from 'file-saver';\n\nexport function downloadFile ( array, fileName, ext) {\n  let file;\n  const header = array[0]\n  switch(ext) {\n    case 'csv': {\n      const csvString = csvFormatRows(array)\n      file = new File(\n        [csvString],\n        fileName,\n        { type: 'text/csv;charset=utf-8' }\n      )\n      FileSaver.saveAs(file)\n      break\n    }\n    case 'xlsx':\n    default: {\n      const sheet = XLSX.utils.aoa_to_sheet(array, {header});\n      const wb = XLSX.utils.book_new();\n      XLSX.utils.book_append_sheet(wb, sheet, 'SheetJS');\n      XLSX.writeFile(wb, fileName);\n      break\n    }\n  }\n}\n","import React from 'react';\nimport {connect} from 'react-redux';\nimport {\n  Button,\n} from 'design-workshop';\n\nimport {exportFlows} from '../../redux/modules/flows';\nimport {downloadFile} from '../../utils/fileExporter';\n\nclass DataPublish extends React.Component {\n\n  render () {\n    const handleExport = () => {\n      const {file, data} = this.props.flows;\n      downloadFile(data, file.name, 'xlsx')\n    }\n    return (\n      <div>\n        <Button onClick={handleExport}>Export fixed data</Button>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  flows: state.flows\n})\n\nexport default connect(mapStateToProps, {exportFlows})(DataPublish);","import DataPublish from './DataPublish'\n\nexport default DataPublish","import React from 'react';\nimport {difference} from 'lodash';\n\nimport {\n  HelpPin\n} from 'design-workshop';\n\nconst HeaderValidation = ({\n  headerNames,\n  fieldNames\n}) => {\n  const diffLength = headerNames.length - fieldNames.length;\n  let diff;\n  if (diffLength > 0) {\n    diff = difference(headerNames, fieldNames);\n  }\n  else diff = difference(fieldNames, headerNames);\n  const validationMap = headerNames.map((name, index) => {\n    if (fieldNames[index] && fieldNames[index] === name) {\n      return {\n        name,\n        valid: true\n      }\n    } else {\n      return {\n        name,\n        valid: false\n      }\n    }\n  });\n\n  return (\n    <div style={{\n      }}>\n      {diff.length === diffLength && diffLength > 0 &&\n        <div className=\"has-text-danger\">\n          <span>Extra headers - </span>\n          { diff.map((field) => {\n             return <span>\"{field}\" </span>\n            })\n          }\n        </div>\n      } \n      {diff.length === Math.abs(diffLength) && diffLength < 0 &&\n        <div className=\"has-text-danger has-text-weight-bold\">\n          <span>Missing headers - </span>\n          { diff.map((field) => {\n             return <span>\"{field}\" </span>\n            })\n          }\n        </div>\n      }\n      <div style={{\n        display: 'flex',\n        justifyContent: 'space-evenly'\n      }}>\n        <div>\n          <div className=\"has-text-weight-bold\">headers </div>\n          {\n            validationMap.map((item, index) => {\n              return (\n                <div key={index} className={item.valid ? 'has-text-black': 'has-text-danger'}>\n                  {item.name}\n                </div>\n              );\n            })\n          }\n        </div>\n        <div>\n          <div className=\"has-text-weight-bold\">schema fields</div>\n          {\n            fieldNames.map((columnName, index) => {\n              return (\n                <div key={index}>\n                  {columnName}\n                </div>\n              );\n            })\n          }\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default HeaderValidation;","import React from 'react'\nimport {connect} from 'react-redux'\n\nimport {Button, DropZone} from 'design-workshop'\nimport { \n  importFlows,\n} from '../../redux/modules/flows';\n\nimport { \n  setStep\n} from '../../redux/modules/ui';\n\nimport {\n  validateHeader, \n  getSchema\n} from '../../redux/modules/schemaValidation';\n\nimport HeaderValidation from '../../components/HeaderValidation';\n\nimport {parseSheet, parseTable} from '../../utils/fileParser';\nimport { MAXIMUM_FILE_SIZE } from '../../constants';\n\nconst FileUpload = ({\n  schema,\n  flows,\n  headerFeedback,\n  setStep,\n  importFlows,\n  validateHeader\n}) => {\n  const handleDrop = ([file]) => {\n    if (file.name.split('.')[1] === 'xlsx') {\n      parseSheet(file)\n      .then((data) => {\n        importFlows({\n          file: {\n            name: file.name\n          },\n          data\n        });\n        validateHeader({source: data, schema})\n      })\n      .catch((error) => console.error('fail to parse file'))\n    }\n    else {\n      parseTable(file)\n      .then((data) => {\n        importFlows({\n          file: {\n            name: file.name\n          },\n          data\n        });\n        validateHeader({source: data, schema})\n      })\n      .catch((error) => console.error('fail to parse file'))\n    }\n  }\n  const handleDropRejected = (file, event) => {\n    console.log(\"file is invalid\")\n  }\n  const handleNextStep = () => setStep({id: '1'})\n  return (\n    <div>\n      <DropZone\n        maxSize={MAXIMUM_FILE_SIZE}\n        onDrop={handleDrop}\n        onDropRejected={handleDropRejected}\n        isSize=\"small\">\n        <span className=\"tech-info\">Drag and drop .xlsx, .csv file here(maximum 10MB)</span>\n      </DropZone>\n      {\n        headerFeedback && headerFeedback.status === 'loading' &&\n        <span>Validating Headers</span>\n      }\n      {\n        headerFeedback && headerFeedback.valid &&\n        <div style={{\n          display: 'flex',\n          justifyContent: 'space-between'\n          }}>\n          <span className=\"has-text-success has-text-weight-bold\">Headers of \"{flows.file.name}\" are valid</span>\n          <Button \n            isColor=\"info\" \n            onClick={handleNextStep}>\n              Next Step\n          </Button>\n        </div>\n      }\n      {\n        headerFeedback && !headerFeedback.valid && headerFeedback.type === 'ERROR_HEADER' &&\n        <div style={{\n          textAlign:'center'\n          }}>\n          <span className=\"has-text-danger has-text-weight-bold\">Headers of \"{flows.file.name}\" do not match schema fields, please fix your file and re-upload</span>\n          <HeaderValidation \n            headerNames = {headerFeedback.headerNames}\n            fieldNames = {headerFeedback.fieldNames}\n          />\n        </div>\n      }\n    </div>\n  )\n}\n\n\nconst mapStateToProps = state => ({\n  schema: state.schemaValidation.descriptor && getSchema(state),\n  flows: state.flows,\n  headerFeedback: state.schemaValidation.headerFeedback\n })\n \n export default connect(mapStateToProps, {\n  importFlows,\n  setStep,\n  validateHeader\n })(FileUpload);\n","import FileUpload from './FileUpload'\n\nexport default FileUpload","\nimport XLSX from 'xlsx';\nimport {\n  csvParse,\n  csvParseRows,\n  tsvParse,\n} from 'd3-dsv';\n\nexport function parseTable( file ) {\n  return new Promise( ( resolve, reject ) => {\n    let reader = new FileReader();\n    reader.onload = ( event ) => {\n      let data;\n      if (file.name.split('.')[1] === 'csv') {\n        data = csvParseRows(event.target.result);\n      }\n      else {\n        data = tsvParse(event.target.result);\n      }\n      resolve(data);\n      reader = undefined;\n    };\n    reader.onerror = ( event ) => {\n      reject( event.target.error );\n      reader = undefined;\n    };\n    return reader.readAsText( file );\n  } );\n}\n\nexport function parseSheet( file ) {\n  return new Promise( (resolve, reject) => {\n    let reader = new FileReader();\n    // Handle errors loadrABS\n    reader.onload = ( event ) => {\n      const bstr = event.target.result;\n      const wb = XLSX.read(bstr, {\n        type: 'binary', \n        // raw: true //If true, plain text parsing will not parse values **\n      }); \n\t\t\t// Get first worksheet\n\t\t\tconst wsname = wb.SheetNames[0];\n\t\t\tconst ws = wb.Sheets[wsname];\n\t\t\t// Convert to \"2D Array\"\n      const data = XLSX.utils.sheet_to_json(ws, {\n        header: 1, \n        // raw: false, // use raw values (true) or formatted strings (false)\n        defval: '', // set null and undefined to empty string for validation\n        blankrows: false // skip blank rows\n      });\n      resolve(data)\n      reader = undefined;\n    };\n    reader.onerror = ( event ) => {\n      reject( event.target.error );\n      reader = undefined;\n    };\n    // Read file into memory as UTF-8\n    reader.readAsBinaryString( file );\n  })\n}","import React from 'react';\n\nimport {\n  Button,\n  Card,\n  Modal,\n  ModalBackground,\n  ModalContent,\n  ModalCard,\n  ModalCardBody,\n  ModalCardFooter,\n  ModalClose\n} from 'design-workshop';\n\nconst ConfirmationModal = ({\n  flows,\n  onSelectDiscard, \n  onSelectDownload,\n  isActive,\n  closeModal\n}) => {\n\n  const handleAction = (id, e) => {\n    switch(id) {\n      case 'cacnel':\n      default: \n        closeModal(); \n        break;\n      case 'download':\n        onSelectDownload();\n        break;\n      case 'discard':\n        onSelectDiscard();\n        break;\n    }\n  }\n  return (\n    <div>\n          <Modal isActive={isActive}>\n            <ModalBackground onClick={closeModal} />\n            <ModalContent>\n              <Card \n                // title=\"Modal title\" \n                bodyContent=\"Leave this step, you might lost your modification?\"\n                onAction = {handleAction}\n                footerActions={[\n                  {label: 'Download', id: 'download', isColor: 'success' }, \n                  {label: 'Discard', id: 'discard', isColor: 'danger'},\n                  {label: 'Cancel', id: 'cancel', isColor: 'info'},\n                ]} />\n            </ModalContent>\n            {/* <ModalCard>\n              <ModalCardBody>\n                You might lost your modification? \n              </ModalCardBody>\n              <ModalCardFooter>\n                  <Button isColor='success'>Download file to local</Button>\n                  <Button isColor=\"danger\">Discard</Button>\n                  <Button isColor='info'>Cancel</Button>\n              </ModalCardFooter>\n            </ModalCard> */}\n            <ModalClose onClick={closeModal} />\n          </Modal>\n    </div>\n  )\n}\n\nexport default ConfirmationModal","import React from 'react';\nimport {groupBy, sortBy} from 'lodash';\n\nimport {RANKED_FIELDS} from '../constants'\n\nconst OverviewTable = ({\n  className,\n  collectedErrors,\n}) => {\n  const columnNames = ['Field', 'Error Type', 'Error Overview']\n  const orderedErrors = sortBy(collectedErrors, (field) => {\n    return RANKED_FIELDS[field.name]\n  })\n  return (\n    <div style={{position: 'relative', width: '100%', height: '70vh'}}>\n      \n      <div className={`action-table ${className}`}>\n        <div className={'action-table-header'}>\n          {\n            columnNames.map((columnName, index) => {\n              return (\n                <div key={index} className=\"table-cell\">\n                  {columnName}\n                </div>\n              );\n            })\n          }\n        </div>\n        <div className={'action-table-main'}>\n          {\n            orderedErrors.map((field, rowIndex) => {\n              // const field = collectedErrors[errorKey];\n              const totalErrors = field.errors.length;\n              const groupedErrors = groupBy(field.errors, (v)=> {return v.value});\n              const distinctErrors = Object.keys(groupedErrors).length;\n              return (\n                <div key={rowIndex} className=\"table-row\">\n                  {\n                    columnNames.map((columnName, columnIndex) => {\n                      let cellValue;\n                      if(columnIndex === 0) cellValue = field.name;\n                      else if(columnIndex === 1) cellValue = field.errorType;\n                      else cellValue = `${totalErrors} rows affected in total, ${distinctErrors} different invalid values`\n                      return (<div key={columnIndex} className=\"table-cell\">{cellValue}</div>)\n                    })\n                  }\n                </div>\n              );\n            })\n          }\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default OverviewTable","import React from 'react';\nimport {connect} from 'react-redux';\nimport {groupBy, sortBy, values, max, min} from 'lodash';\n\nimport {RANKED_FIELDS} from '../../constants';\n\nimport {Button} from 'design-workshop';\nimport { \n  setStep\n} from '../../redux/modules/ui';\nimport {startModification} from '../../redux/modules/modification';\n\n// import FeedbackTable from '../../components/FeedbackTable';\n// import AggregatedTable from '../../components/AggregatedTable';\nimport OverviewTable from '../../components/OverviewTable';\n\nimport {validateTable, getRelations, getForeignKeys, getSchema} from '../../redux/modules/schemaValidation';\n\nclass SchemaValidation extends React.Component {\n  componentDidMount () {\n    const {flows, schema, relations, schemaFeedback} = this.props;\n    if (!schemaFeedback) {\n      this.props.validateTable({source:flows, schema, relations});\n    }\n  }\n  render() {\n    const {schemaFeedback, modificationList} = this.props;\n    const re = /row\\s\\d*/;\n\n    const getOrderedErrors = (collectedErrors) => {\n      const errorsList = values(collectedErrors).reduce((res, item) => {\n        return res.concat(item.errors)\n      },[]);\n      \n      const groupedErrorsList = \n        values(groupBy(errorsList,(v) => {\n          if (v.field !== 'currency|year|reporting') return (v.field + v.value)\n          else {\n            const groupedValue = v.value.split('|')[0] + v.value.split('|')[2]\n            return v.field + groupedValue\n          }\n        }))\n        .map((errors, index)=> {\n          const fieldName = errors[0].field;\n          let yearRange;\n          if (fieldName === 'currency|year|reporting') {\n            const years = errors.map((error) => error.value.split('|')[1]);\n            yearRange = years.length > 0 ? `${min(years)}-${max(years)}` : years[0]\n          }\n          const value = fieldName !== 'currency|year|reporting' ? errors[0].value : `${errors[0].value.split('|')[0]}|${yearRange}|${errors[0].value.split('|')[2]}`\n          return {\n            index,\n            field: errors[0].field,\n            errorType: errors[0].errorType,\n            fixed: false,\n            message: errors[0].message.replace(re, `${errors.length} rows`),\n            value, \n            errors\n          }\n        });\n      return sortBy(groupedErrorsList, (field) => {\n        return RANKED_FIELDS[field.name]\n      });\n    }\n\n    const handlePrevStep = () => this.props.setStep({id: '0'})\n    const handleNextStep = () => {\n      if (!modificationList) {\n        const orderedErrors = getOrderedErrors(schemaFeedback.collectedErrors);\n        this.props.startModification(orderedErrors)\n      }\n      this.props.setStep({id: '2'});\n    }\n\n    return (\n      <div>\n        {\n          schemaFeedback && schemaFeedback.status === 'loading' &&\n          <span>{schemaFeedback.loader}</span>\n        }\n        {\n          schemaFeedback && !schemaFeedback.valid && schemaFeedback.collectedErrors &&\n          <div>\n            <span className=\"has-text-danger has-text-weight-bold\">\n              {/* Found format errors in {Object.keys(schemaFeedback.collectedErrors.formatErrors).length} columns, ForeignKey errors in {Object.keys(schemaFeedback.collectedErrors.foreignKeyErrors).length} columns, {schemaFeedback.errors.length} rows */}\n              Found errors in {schemaFeedback.errors.length} rows of {Object.keys(schemaFeedback.collectedErrors).length} fields\n            </span>\n            <OverviewTable collectedErrors={schemaFeedback.collectedErrors} />\n            <div style={{\n              display: 'flex',\n              justifyContent: 'space-between'\n            }}>\n              <Button \n                isColor=\"info\" \n                onClick={handlePrevStep}>\n                  Previous Step\n              </Button>\n              <Button \n                isColor=\"info\"\n                onClick={handleNextStep}>\n                  Review Errors\n              </Button>\n            </div>\n           \n          </div>\n        }\n        {\n          schemaFeedback && schemaFeedback.valid && <span className=\"has-text-success has-text-weight-bold\">Flows data is valid</span>\n        }\n      </div>\n    )\n  }\n}\nconst mapStateToProps = state => ({\n  flows: state.flows.data,\n  schema: state.schemaValidation.descriptor && getSchema(state),\n  relations: state.schemaValidation.descriptor && getRelations(state),\n  foreignKeys: state.schemaValidation.descriptor && getForeignKeys(state),\n  schemaFeedback: state.schemaValidation.schemaFeedback,\n  modificationList: state.modification.modificationList\n})\n\nexport default connect(mapStateToProps, {\n  validateTable,\n  setStep,\n  startModification,\n})(SchemaValidation);","import SchemaValidation from './SchemaValidation'\n\nexport default SchemaValidation","import Layout from './Layout'\n\nexport default Layout","/* eslint-disable no-unused-vars */\nimport React from 'react';\n\nimport {\n    LayoutWrapper,\n    LayoutContainer,\n    LayoutNav,\n    LayoutFooter,\n    LayoutFooterColumn,\n    LayoutContent,\n    LayoutContentColumn,\n    LayoutHeader,\n    AppTitle,\n    RunningTitle,\n    Content,\n    ButtonContainer,\n    Button\n} from 'design-workshop';\n\nconst Layout = ({\n  steps, \n  selectedStep, \n  onSetStep,\n  children\n}) => {\n  return (\n    <LayoutWrapper hasConfig>\n      <LayoutHeader>\n        <AppTitle>Ricardo Data App</AppTitle>\n        <RunningTitle>{selectedStep.title}</RunningTitle>\n      </LayoutHeader>\n      <LayoutContainer>\n        <LayoutContent>\n          <LayoutContentColumn isConfig>\n            {steps.map((step, index) => {\n              const isSelectedStep = (selectedStep.id === step.id)\n              const isStepDisabled = step.id > selectedStep.id;\n              const handleClickStep = () => onSetStep(step)\n              return (\n                <ButtonContainer key={index} >\n                  <Button \n                    isColor={isSelectedStep ? \"info\" : null} \n                    isDisabled={isStepDisabled}\n                    onClick={handleClickStep}>\n                    {step.name}\n                  </Button>\n                </ButtonContainer>)\n              })\n            }\n          </LayoutContentColumn>\n          <LayoutContentColumn isWorkspace>\n            {children}\n          </LayoutContentColumn>\n        </LayoutContent>\n        <LayoutFooter>\n          <LayoutFooterColumn isSecondary>\n            <h3>mdialab SciencesPo</h3>\n          </LayoutFooterColumn>\n          <LayoutFooterColumn isPrimary>\n            Ricardo Data App\n          </LayoutFooterColumn>\n        </LayoutFooter>\n      </LayoutContainer>\n    </LayoutWrapper>\n  )\n};\n\nexport default Layout;\n","/* eslint-disable no-unused-vars */\nimport React from 'react';\nimport {connect} from 'react-redux'\n\nimport DataPrep from './containers/DataPrep';\nimport DataModification from './containers/DataModification';\nimport DataPublish from './containers/DataPublish';\nimport FileUpload from './containers/FileUpload';\n\nimport ConfirmationModal from './components/ConfirmationModal';\n\nimport SchemaValidation from './containers/SchemaValidation';\nimport Layout from './containers/Layout';\n\nimport {downloadFile} from './utils/fileExporter';\n\nimport styles from 'design-workshop/themes/default/style.css';\nimport './App.css';\n\nimport { \n  setStep,\n  showModal,\n  hideModal\n} from './redux/modules/ui';\n\nconst App = ({\n  steps,\n  isModalDisplay,\n  selectedStep,\n  repoData,\n  flows,\n  modificationList,\n  //actions\n  setStep,\n  showModal,\n  hideModal\n}) => {\n\n  const renderChildren = () => {\n    switch(selectedStep.id) {\n      case '0':\n      default:\n        return <FileUpload />;\n      case '1':\n        return <SchemaValidation />;\n      case '2':\n        return <DataModification />;\n      case '3':\n        return <DataPublish />;\n    }\n  }\n  const handleExport = () => {\n    const {file, data} = flows;\n    downloadFile(data, file.name, 'xlsx')\n  }\n\n  const handleSetStep = (step) => {\n    let fixed\n    if (modificationList) {\n      const fixed = modificationList.filter((item) => item.fixed)\n    }\n    if(fixed && step.id === '0') showModal();\n    else setStep(step)\n  }\n  \n  return (\n    <div className=\"App\">\n      <DataPrep />\n      { repoData.descriptor &&\n        <Layout \n          steps={steps}\n          selectedStep={selectedStep}\n          onSetStep={handleSetStep}>\n          {renderChildren()}\n        </Layout>\n      }\n      <ConfirmationModal \n        isActive={isModalDisplay}\n        onSelectDiscard={() => setStep(steps[0])}\n        onSelectDownload={handleExport}\n        closeModal={hideModal} />\n    </div>\n  );\n}\n\n\nconst mapStateToProps = state => ({\n  steps: state.ui.steps,\n  isModalDisplay: state.ui.isModalDisplay,\n  flows: state.flows,\n  selectedStep: state.ui.selectedStep,\n  modificationList: state.modification.modificationList,\n  repoData: state.repoData\n })\n \n export default connect(mapStateToProps, {\n  showModal,\n  hideModal,\n  setStep\n })(App);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { combineReducers } from 'redux'\nimport ui from './modules/ui';\nimport flows from './modules/flows';\nimport repoData from './modules/repoData';\nimport schemaValidation from './modules/schemaValidation';\nimport modification from './modules/modification';\nexport default combineReducers({\n  ui,\n  flows,\n  schemaValidation,\n  modification,\n  repoData\n})","import { createStore, applyMiddleware, compose } from 'redux'\nimport { persistStore, persistReducer } from 'redux-persist'\n// import storage from 'redux-persist/lib/storage' // defaults to localStorage for web\nimport * as storage from 'localforage';\n\nimport thunk from 'redux-thunk'\nimport rootReducer from './rootReducer'\n\nconst persistConfig = {\n  key: 'root',\n  storage,\n}\nconst persistedReducer = persistReducer(persistConfig, rootReducer)\n\n\nexport default function configureStore ( initialState = {} ) {\n  const enhancers = []\n  const middleware = [thunk]\n  \n  if (process.env.NODE_ENV === 'development') {\n    const devToolsExtension = window.__REDUX_DEVTOOLS_EXTENSION__\n  \n    if (typeof devToolsExtension === 'function') {\n      enhancers.push(devToolsExtension())\n    }\n  }\n  \n  const composedEnhancers = compose(\n    applyMiddleware(...middleware),\n    ...enhancers\n  )\n  \n  let store = createStore(\n    // rootReducer,\n    persistedReducer,\n    initialState,\n    composedEnhancers\n  )\n  let persistor = persistStore(store)\n  return { store, persistor }\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux'\n\nimport './index.css';\nimport App from './App';\n\nimport * as serviceWorker from './serviceWorker';\n\nimport configureStore from './redux/configureStore';\n\nconst initialState = {};\nconst {store} = configureStore(initialState);\n\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>, \n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}